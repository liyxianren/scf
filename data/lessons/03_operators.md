# 第三章：运算符与表达式

## 3.1 算术运算符

```c
#include <stdio.h>

int main() {
    int a = 10, b = 3;

    printf("a + b = %d\n", a + b);   // 加法: 13
    printf("a - b = %d\n", a - b);   // 减法: 7
    printf("a * b = %d\n", a * b);   // 乘法: 30
    printf("a / b = %d\n", a / b);   // 整数除法: 3
    printf("a %% b = %d\n", a % b);  // 取余: 1

    return 0;
}
```

### 运算符列表

| 运算符 | 名称 | 示例 | 结果 |
|--------|------|------|------|
| `+` | 加法 | `5 + 3` | 8 |
| `-` | 减法 | `5 - 3` | 2 |
| `*` | 乘法 | `5 * 3` | 15 |
| `/` | 除法 | `5 / 3` | 1（整数） |
| `%` | 取余 | `5 % 3` | 2 |

> **注意**：整数除法会截断小数部分。`5 / 3 = 1`，而不是 1.666...

### 浮点数除法

```c
float result = 5.0f / 3.0f;  // 结果: 1.666667
// 或者
float result = (float)5 / 3;  // 强制类型转换
```

## 3.2 赋值运算符

```c
int a = 10;      // 简单赋值

a += 5;          // 等价于 a = a + 5; 结果: 15
a -= 3;          // 等价于 a = a - 3; 结果: 12
a *= 2;          // 等价于 a = a * 2; 结果: 24
a /= 4;          // 等价于 a = a / 4; 结果: 6
a %= 4;          // 等价于 a = a % 4; 结果: 2
```

## 3.3 自增和自减运算符

```c
int a = 5;

a++;    // 后置自增: a 变为 6
++a;    // 前置自增: a 变为 7

a--;    // 后置自减: a 变为 6
--a;    // 前置自减: a 变为 5
```

### 前置与后置的区别

```c
int a = 5, b;

b = a++;  // b = 5, a = 6 (先用后加)
b = ++a;  // a = 7, b = 7 (先加后用)
```

## 3.4 关系运算符

关系运算符用于比较两个值，返回 **1（真）** 或 **0（假）**：

```c
#include <stdio.h>

int main() {
    int a = 5, b = 3;

    printf("a == b: %d\n", a == b);  // 等于: 0
    printf("a != b: %d\n", a != b);  // 不等于: 1
    printf("a > b: %d\n", a > b);    // 大于: 1
    printf("a < b: %d\n", a < b);    // 小于: 0
    printf("a >= b: %d\n", a >= b);  // 大于等于: 1
    printf("a <= b: %d\n", a <= b);  // 小于等于: 0

    return 0;
}
```

| 运算符 | 含义 | 示例 |
|--------|------|------|
| `==` | 等于 | `a == b` |
| `!=` | 不等于 | `a != b` |
| `>` | 大于 | `a > b` |
| `<` | 小于 | `a < b` |
| `>=` | 大于等于 | `a >= b` |
| `<=` | 小于等于 | `a <= b` |

> **注意**：`==` 是比较运算符，`=` 是赋值运算符，不要混淆！

## 3.5 逻辑运算符

```c
#include <stdio.h>

int main() {
    int a = 1, b = 0;  // 1 代表真，0 代表假

    printf("a && b: %d\n", a && b);  // 逻辑与: 0
    printf("a || b: %d\n", a || b);  // 逻辑或: 1
    printf("!a: %d\n", !a);          // 逻辑非: 0
    printf("!b: %d\n", !b);          // 逻辑非: 1

    return 0;
}
```

| 运算符 | 名称 | 规则 |
|--------|------|------|
| `&&` | 逻辑与 | 两边都为真时结果为真 |
| `\|\|` | 逻辑或 | 有一边为真结果就为真 |
| `!` | 逻辑非 | 取反，真变假，假变真 |

### 实际应用

```c
int age = 20;
int score = 85;

// 判断是否符合条件：年龄大于18且分数大于80
if (age > 18 && score > 80) {
    printf("符合条件\n");
}
```

## 3.6 位运算符

位运算符直接操作二进制位：

```c
int a = 5;   // 二进制: 0101
int b = 3;   // 二进制: 0011

printf("a & b = %d\n", a & b);   // 按位与: 0001 = 1
printf("a | b = %d\n", a | b);   // 按位或: 0111 = 7
printf("a ^ b = %d\n", a ^ b);   // 按位异或: 0110 = 6
printf("~a = %d\n", ~a);         // 按位取反
printf("a << 1 = %d\n", a << 1); // 左移: 1010 = 10
printf("a >> 1 = %d\n", a >> 1); // 右移: 0010 = 2
```

## 3.7 运算符优先级

从高到低排列：

1. `()` 括号
2. `!` `++` `--` 一元运算符
3. `*` `/` `%` 乘除取余
4. `+` `-` 加减
5. `<` `<=` `>` `>=` 关系运算符
6. `==` `!=` 相等性
7. `&&` 逻辑与
8. `||` 逻辑或
9. `=` `+=` `-=` 等赋值运算符

> **建议**：不确定优先级时，使用括号明确运算顺序

```c
int result = (2 + 3) * 4;  // 使用括号，结果为 20
```

## 本章小结

- 算术运算符：`+`、`-`、`*`、`/`、`%`
- 整数除法会截断小数
- 自增自减：`++`、`--`，注意前置与后置的区别
- 关系运算符返回 0 或 1
- 逻辑运算符：`&&`、`||`、`!`
- 使用括号明确运算顺序
