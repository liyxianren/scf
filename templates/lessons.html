{% extends "base.html" %}

{% block title %}æ•™ç¨‹åˆ—è¡¨ - Pythonå­¦ä¹ å¹³å°{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1>ğŸ“š Python æ•™ç¨‹</h1>
        <p>ç³»ç»Ÿå­¦ä¹ Pythonç¼–ç¨‹ï¼Œä»å…¥é—¨åˆ°ç²¾é€šï¼Œæ¯ç« éƒ½é…æœ‰è¯¦ç»†è®²è§£å’Œç»ƒä¹ é¢˜</p>
    </div>

    <div class="lessons-container" id="lessons-list">
        <div class="loading">
            <div class="loading-spinner"></div>
            <div>æ­£åœ¨åŠ è½½è¯¾ç¨‹...</div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    fetch('/api/lessons')
        .then(response => response.json())
        .then(data => {
            const container = document.getElementById('lessons-list');
            if (data.success && data.data.length > 0) {
                container.innerHTML = data.data.map(lesson => `
                    <a href="/lessons/${lesson.id}" class="lesson-card">
                        <div class="lesson-card-header">
                            <div class="lesson-chapter">ç¬¬ ${lesson.chapter_num} ç« </div>
                            <h3 class="lesson-title">${lesson.title}</h3>
                        </div>
                        <div class="lesson-card-body">
                            <p class="lesson-desc">${lesson.description || 'æš‚æ— æè¿°'}</p>
                        </div>
                        <div class="lesson-card-footer">
                            <span class="start-btn">å¼€å§‹å­¦ä¹  â†’</span>
                        </div>
                    </a>
                `).join('');
            } else {
                container.innerHTML = '<p class="empty-message">æš‚æ— æ•™ç¨‹å†…å®¹</p>';
            }
        })
        .catch(error => {
            document.getElementById('lessons-list').innerHTML =
                '<p class="error-message">åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•</p>';
        });
});
</script>
{% endblock %}
